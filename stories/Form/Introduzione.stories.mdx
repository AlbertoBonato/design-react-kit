import { Meta, Canvas, Story } from "@storybook/addon-docs/blocks";
import { actions } from '@storybook/addon-actions';
import Select from 'react-select'

import { Button, Callout, CalloutText, CalloutTitle, Form, FormGroup, FormFeedback, FormText, Col, Row, Input, Label, Toggle } from '../../src'
import {
  DropdownIndicator,
  Option,
} from './Select/SelectExamples'


<Meta title="Documentazione/Form/Introduzione" />

# Introduzione
### Elementi e stili per la creazione di form accessibili e responsivi

All’interno di un form, nella visualizzazione predefinita gli elementi sono allineati verticalmente, ma è possibile utilizzare classi aggiuntive per variare questo tipo di layout.

Bootstrap Italia applica automaticamente a tutti i form `display: block` e `width: 100%`.

## Organizzazione dei campi

Per raggruppare correttamente gli elementi di un modulo form è bene utilizzare la classe .form-group per ogni singolo blocco, in questo modo l’elemento input, l’etichetta, il testo di aiuto opzionale e la messaggistica di validazione otterranno lo stile grafico e le funzionalità predisposte per loro. Puoi usarlo con `<fieldset>`, `<div>` o qualsiasi altro elemento.

### Dimensionamento delle colonne

Strutture più complesse possono essere costruite usando il sistema a griglia, da utilizzare per layout che richiedono più colonne, larghezze diverse e opzioni di allineamento aggiuntive. La classe `.form-row` ne assicura una corretta spaziatura.

Puoi scegliere di dare una dimensione a una colonna, ad esempio dandogli un valore di `size={7}`, mentre le restanti `Col` si divideranno il resto dello spazio.

<Canvas>
    <Story name="dimensionamento-colonne">
<div>
  <div className="form-row">
      <Input type="text" label="Nome" id="formNome" wrapperClass="col col-md-6"/>
      <Input type="text" label="Cognome" id="formCognome" wrapperClass="col col-md-6"/>
  </div>
  <div className="form-row">
      <Input type="text" label="Città" id="Citta" wrapperClass="col col-7"/>
      <Input type="text" label="Comune" id="Comune" wrapperClass="col"/>
      <Input type="text" label="CAP" id="CAP" wrapperClass="col"/>
  </div>
</div>
    </Story>
</Canvas>

Ecco l’esempio di una struttura più complessa creata con il sistema a griglie.

<Canvas>
    <Story name="dimensionamento-colonne-form-complesso">
<div>
    <div className="form-row">
        <Input type="email" label="Nome" id="inputEmail4" placeholder="inserisci il tuo indirizzo email" wrapperClass="col col-md-6"/>
        <Input type="password" label="Password" id="exampleInputPassword" placeholder="Inserisci la tua password" wrapperClass="col col-md-6"/>
    </div>
    <div className="form-row">
        <Input type="text" label="Indirizzo" id="inputAddress" placeholder="Via Roma, 1" wrapperClass="col"/>
    </div>
    <div className="form-row">
        <Input type="text" label="Comune" id="inputCity" wrapperClass="col col-md-6"/>
        <Input type="text" label="CAP" id="inputCAP" wrapperClass="col col-md-2"/>
        <Col md="4">
            <div className="bootstrap-select-wrapper">
                <label>Provincia</label>
                <Select
                    components={{
                    Option,
                    DropdownIndicator,
                    IndicatorSeparator: null
                    }}
                    styles={{
                        container: (provided) => ({...provided, height: '2.5rem'}),
                        valueContainer: (provided) => ({...provided, height: '2.5rem'}),
                        control: (provided) => ({...provided, height: '2.5rem'}),
                    }}
                    id="selectExampleClassic"
                    options={[
                        { value: 'Value 1', label: 'Opzione 1' },
                        { value: 'Value 2', label: 'Opzione 2' },
                        { value: 'Value 3', label: 'Opzione 3' },
                        {
                            value: 'Value 4',
                            label: 'Opzione 4'
                        },
                        { value: 'Value 5', label: 'Opzione 5' }
                    ]}
                    placeholder="Scegli una opzione"
                    aria-label="Scegli una opzione"
                    classNamePrefix="react-select"
                    {...actions('onChange')}
                />
            </div>
        </Col>
    </div>
    <div className="form-row">
        <Col md="6" className="form-group">
            <Toggle label="Label dell'interruttore 1" disabled={false} id="toggleEsempio1a"/>
        </Col>
    </div>
    <div className="form-row">
      <Col className="form-group text-center">
          <Button color="primary" outline>Annulla</Button>
          <Button type="submit" color="primary">Conferma</Button>
      </Col>
    </div>
</div>
    </Story>
</Canvas>

### Auto-dimensionamento

L’esempio seguente usa una delle utilità di flexbox per centrare verticalmente il contenuto e cambiando `.col` con `.col-auto` in modo che le colonne occupino solo lo spazio necessario. In altre parole, la colonna si dimensiona in base al contenuto. È possibile usarlo anche quando sono presenti altre colonne con dimensioni specifiche (es.: `col-sm-3`).

<Canvas>
    <Story name="form-auto-dimensionamento">
        <div className="form-row align-items-center">
  <Col>
    <label className="sr-only" for="inlineFormInput">Nome</label>
    <input type="text" className="form-control" id="inlineFormInput" placeholder="Mario Rossi"/>
  </Col>
  <Col>
    <label className="sr-only" for="inlineFormInputGroup">Username</label>
    <div className="input-group">
      <div className="input-group-prepend">
        <div className="input-group-text">@</div>
      </div>
      <input type="text" className="form-control" id="inlineFormInputGroup" placeholder="Username"/>
    </div>
  </Col>
  <Col>
    <div className="form-check m-0">
      <input className="form-check-input" type="checkbox" id="autoSizingCheck"/>
      <label className="form-check-label" for="autoSizingCheck">
        Ricordami
      </label>
    </div>
  </Col>
  <Col>
    <Button type="submit" color="primary">Invia</Button>
  </Col>
</div>
    </Story>
</Canvas>

<div className="docs">
    <Callout color="warning" >
        <CalloutTitle>Alternative alle etichette nascoste</CalloutTitle>
        <CalloutText>
            Le tecnologie assistive come gli screenreader avranno problemi con i tuoi moduli se non includi un’etichetta per ogni input. Per questi moduli in linea, puoi nascondere le etichette usando la classe <code>.sr-only</code>. Esistono altri metodi alternativi per fornire un’etichetta per le tecnologie assistive, come l’attributo <code>aria-label</code>, <code>aria-labelledby</code> o <code>title</code>. Se nessuno di questi è presente, le tecnologie assistive possono ricorrere all’uso dell’attributo <code>placeholder</code>, se presente, ma è sconsigliato.
        </CalloutText>
    </Callout>
</div>

## Disabilitazione di campi

Aggiungi l’attributo booleano `disabled` su un input per impedire le interazioni dell’utente e renderlo più chiaro.

<Canvas>
    <Story name="form-field-disabled">
        <Input type="text" placeholder="Esempio di input disabilitato" disabled label="Label" id="disabledInput"/>
    </Story>
</Canvas>

### Disabilitazione di un intero form

Aggiungi l’attributo disabled al `<fieldset>` per disabilitare tutti gli elementi del form contenuti.


<Canvas>
    <Story name="form-disabled">
        <div>
  <fieldset disabled aria-label="Form disabilitato">
    <legend>Esempio di form disabilitato</legend>
    <div class="form-group">
      <Input type="text" label="Input" id="disabledTextInput" placeholder="input disabilitato" disabled/>
    </div>
    <div class="form-group">
      <div className="bootstrap-select-wrapper">
        <label>Field Label</label>
        <Select
            components={{
            Option,
            DropdownIndicator,
            IndicatorSeparator: null
            }}
            styles={{
                container: (provided) => ({...provided, height: '2.5rem'}),
                valueContainer: (provided) => ({...provided, height: '2.5rem'}),
                control: (provided) => ({...provided, height: '2.5rem'}),
            }}
            id="selectExampleClassic"
            options={[
                { value: 'Value 1', label: 'Opzione 1' },
                { value: 'Value 2', label: 'Opzione 2' },
                { value: 'Value 3', label: 'Opzione 3' },
                {
                    value: 'Value 4',
                    label: 'Opzione 4'
                },
                { value: 'Value 5', label: 'Opzione 5' }
            ]}
            placeholder="Seleziona una opzione"
            aria-label="Seleziona una opzione"
            classNamePrefix="react-select"
            {...actions('onChange')}
        />
        </div>
    </div>
    <div class="form-check">
      <Input id="checkbox1" type="checkbox" disabled/>
        <Label for="checkbox1" check>
          Check disabilitato
        </Label>
    </div>
    <Button type="submit" color="primary" className="mt-3">Submit</Button>
  </fieldset>
</div>
    </Story>
</Canvas>

<div className="docs">
    <Callout color="warning" >
        <CalloutTitle>Compatibilità Cross-browser</CalloutTitle>
        <CalloutText>
            Mentre Bootstrap applicherà questi stili in tutti i browser, Internet Explorer 11 e successivi non supportano completamente l’attributo <code>disabled</code> nel <code>&lt;fieldset&gt;</code>. Usa un JavaScript personalizzato per disabilitare il fieldset in questi browser.
        </CalloutText>
    </Callout>
</div>

## Validazione

Fornisci un feedback ai tuoi utenti con la validazione del form HTML5 disponibile nei browser supportati. Scegli tra le risposte di convalida predefinite del browser o implementa messaggi personalizzati con le classi integrate inizializzate con JavaScript.

### Come funziona

La validazione viene applicata tramite i due modificatori `valid` e `invalid`: come nella convenzione di `reactstrap` questi attivano delle classi CSS `is-valid` e `is-invalid` solo quando hanno un valore `true`.

### Stili personalizzati

<Canvas>
    <Story id="componenti-form-form-validation--example-complete" />
</Canvas>
